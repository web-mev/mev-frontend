<div class="container" rtl>
    <form [formGroup]="changePasswordForm" (ngSubmit)="changePassword()">
        <div class="row justify-content-center">
            <div class="col-md-8 form-group">
                <mat-card>
                    <span class="d-flex justify-content-between align-items-baseline">
                        <h2>Change password</h2>
                    </span>
                    
                    <div class="row">
                        <div class="msg msg--error" *ngIf="errorMessage">
                            <span>{{ errorMessage }}</span>
                        </div>
                        <div class="msg msg--success" *ngIf="successMessage">
                            <span>{{ successMessage }}</span>
                        </div>
                    </div>

                    <div class="row">
                        <mat-form-field class="col" [ngClass]="routeAnimationsElements">
                            <input matInput type="password" placeholder="Old password" formControlName="current_password"
                                [ngClass]="{ 'is-invalid': submitted && f.current_password.errors }" />
                                <div *ngIf="submitted && f.current_password.errors">
                                <mat-error *ngIf="f.current_password.errors.required">
                                    Password is required
                                </mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="row">
                        <mat-form-field class="col" [ngClass]="routeAnimationsElements">
                            <input matInput type="password" placeholder="New password" formControlName="password"
                                [ngClass]="{ 'is-invalid': submitted && f.password.errors }" />
                            <div *ngIf="submitted && f.password.errors">
                                <mat-error *ngIf="f.password.errors.required">
                                    Password is required
                                </mat-error>
                                <mat-error *ngIf="f.password.errors.minlength">
                                    New password must be at least 8 characters
                                </mat-error>
                                <mat-error *ngIf="f.password.errors.pattern">
                                    New password must have at least one uppercase letter, one lowercase letter, one
                                    number
                                    and one special character.
                                </mat-error>

                            </div>
                        </mat-form-field>
                    </div>

                    <div class="row">
                        <mat-form-field class="col" [ngClass]="routeAnimationsElements">
                            <input matInput type="password" placeholder="Confirm password"
                                formControlName="confirm_password"
                                [ngClass]="{ 'is-invalid': submitted && f.confirm_password.errors }" />
                            <div *ngIf="submitted && f.confirm_password.errors">
                                <mat-error *ngIf="f.confirm_password.errors.required">
                                    Please confirm your password
                                </mat-error>
                                <mat-error *ngIf="f.confirm_password.errors.notMatched">
                                    Confirm Password does not match with password.
                                </mat-error>
                            </div>
                        </mat-form-field>

                    </div>

                    <div class="row buttons d-flex justify-content-center pad">
                        <button type="submit" mat-raised-button color="accent" [disabled]="loading"
                            [ngClass]="routeAnimationsElements">
                            <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                            Update password
                        </button>
                    </div>                    
                </mat-card>
            </div>
        </div>
    </form>
</div>

